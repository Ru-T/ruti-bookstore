<%= form_tag charges_path, method: :post do %>
  <article>
    <% if flash[:error].present? %>
      <div id="error_explanation">
        <p><%= flash[:error] %></p>
      </div>
    <% end %>
    <%= hidden_field_tag :pending_purchase_id, purchase.id %>
    <label class="amount">
      <td>Amount: <%= (purchase.price_at_purchase * 100) * purchase.quantity %></td>
      <!-- <span>Amount: <%#= "$#{@amount}.00" * purchase.quantity%></span> -->
    </label>
  </article>

  <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
          data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
          data-description="Your Books"
          data-billing-address=true
          data-shipping-address=true
          data-amount=<%= @amount %>
          data-label="Purchase"
          data-panel-label="Submit Order"
          data-locale="auto"></script>
<% end %>
